<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS Smart Engine Pro - Ultimate Edition</title>
    <style>
        :root { --ag-green: #67bc91; --cf-orange: #f38020; --ag-dark: #0f0f0f; --ag-card: #1c1c1e; --ag-gray: #8e8e93; --ag-red: #ff453a; }
        body { background: var(--ag-dark); color: white; font-family: -apple-system, sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; transition: 0.5s; }
        .header { width: 100%; padding: 20px 0; text-align: center; font-weight: 600; border-bottom: 0.5px solid #333; letter-spacing: 1px; }
        
        /* C√¥ng t·∫Øc Khi√™n th√¥ng minh */
        .shield-section { margin: 30px 0; position: relative; width: 180px; height: 180px; display: flex; align-items: center; justify-content: center; }
        .shield-circle { width: 140px; height: 140px; border-radius: 50%; border: 4px solid #333; transition: 0.5s; display: flex; align-items: center; justify-content: center; z-index: 2; cursor: pointer; }
        .active-circle { border-color: var(--ag-green); box-shadow: 0 0 40px rgba(103, 188, 145, 0.4); }
        .shield-icon { font-size: 60px; transition: 0.5s; filter: grayscale(1); opacity: 0.4; }
        .active-icon { filter: grayscale(0); transform: scale(1.1); opacity: 1; }
        .loader { position: absolute; width: 170px; height: 170px; border: 4px solid transparent; border-radius: 50%; display: none; animation: spin 1s linear infinite; z-index: 1; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .status-label { font-size: 18px; font-weight: bold; color: #555; margin-bottom: 20px; text-transform: uppercase; transition: 0.3s; }
        .status-on { color: var(--ag-green) !important; }

        /* Danh m·ª•c Menu */
        .menu-container { width: 92%; max-width: 420px; }
        .group-title { font-size: 11px; color: var(--ag-gray); margin: 15px 5px 8px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; }
        .menu-item { background: var(--ag-card); border-radius: 15px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: 0.2s; border: 1px solid transparent; }
        .menu-item:active { transform: scale(0.96); }
        .icon-box { width: 40px; height: 40px; background: #2c2c2e; border-radius: 10px; margin-right: 15px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
        .badge { font-size: 10px; padding: 3px 10px; border-radius: 10px; font-weight: bold; background: #333; }

        /* Checker (D∆∞·ªõi g·∫°ch ƒë·ªè) */
        .checker-box { width: 92%; max-width: 420px; margin-top: 20px; padding: 20px 0; border-top: 2px solid var(--ag-red); }
        .check-item { background: #151517; border-radius: 12px; padding: 15px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--ag-gray); margin-right: 10px; display: inline-block; transition: 0.3s; }
        .dot-on { background: var(--ag-green); box-shadow: 0 0 10px var(--ag-green); }
    </style>
</head>
<body>

    <div class="header">DNS SMART ENGINE PRO</div>

    <div class="shield-section" onclick="toggleSystem()">
        <div class="loader" id="loader"></div>
        <div class="shield-circle" id="circle"><div class="shield-icon" id="icon">üõ°Ô∏è</div></div>
    </div>

    <div class="status-label" id="status">CH·∫æ ƒê·ªò CH·ªú</div>

    <div class="menu-container">
        <div class="group-title">ADGUARD (CH·∫∂N QU·∫¢NG C√ÅO - CC1A65)</div>
        <div class="menu-item" onclick="downloadWindows('AdGuard')">
            <div style="display:flex; align-items:center;"><div class="icon-box">üñ•Ô∏è</div><div><b>Windows Auto Fix</b><br><small style="color:var(--ag-gray)">adguard-remove-ads.bat</small></div></div>
            <div class="badge" style="color:var(--ag-green)">BLOCK</div>
        </div>
        <div class="menu-item" onclick="installProfile('AdGuard')">
            <div style="display:flex; align-items:center;"><div class="icon-box">üçé</div><div><b>iOS Profile</b><br><small style="color:var(--ag-gray)">T·∫£i c·∫•u h√¨nh .mobileconfig</small></div></div>
            <div class="badge" style="color:var(--ag-green)">SECURE</div>
        </div>
        <div class="menu-item" onclick="copyAndroid('cc1a659b-a5b6-4fb1-b829-4ee1969f1c99.dns.nextdns.io')">
            <div style="display:flex; align-items:center;"><div class="icon-box">ü§ñ</div><div><b>Android AdGuard</b><br><small style="color:var(--ag-gray)">Private DNS ID: cc1a65</small></div></div>
            <div class="badge" style="color:var(--ag-green)">STABLE</div>
        </div>

        <div class="group-title">CLOUDFLARE (T·ªêC ƒê·ªò & GAME - 1.1.1.1)</div>
        <div class="menu-item" onclick="downloadWindows('Cloudflare')">
            <div style="display:flex; align-items:center;"><div class="icon-box">‚ö°</div><div><b>Windows 1.1.1.1</b><br><small style="color:var(--ag-gray)">cloudflare-fast.bat</small></div></div>
            <div class="badge" style="color:var(--cf-orange)">FAST</div>
        </div>
        <div class="menu-item" onclick="installProfile('Cloudflare')">
            <div style="display:flex; align-items:center;"><div class="icon-box">üçé</div><div><b>iOS Profile 1.1.1.1</b><br><small style="color:var(--ag-gray)">T·∫£i c·∫•u h√¨nh Cloudflare</small></div></div>
            <div class="badge" style="color:var(--cf-orange)">SECURE</div>
        </div>
        <div class="menu-item" onclick="copyAndroid('one.one.one.one')">
            <div style="display:flex; align-items:center;"><div class="icon-box">ü§ñ</div><div><b>Android Settings</b><br><small style="color:var(--ag-gray)">C√†i ƒë·∫∑t DNS h·ªá th·ªëng</small></div></div>
            <div class="badge" style="color:var(--cf-orange)">GLOBAL</div>
        </div>
    </div>

    <div class="checker-box">
        <div class="group-title" style="margin-left:0; color:var(--ag-red);">KI·ªÇM TRA TR·∫†NG TH√ÅI TH·ª∞C T·∫æ</div>
        <div class="check-item">
            <span><span class="dot" id="dot-ag"></span>AdGuard Status</span>
            <small id="txt-ag" style="color:var(--ag-gray)">OFFLINE</small>
        </div>
        <div class="check-item">
            <span><span class="dot" id="dot-cf"></span>Cloudflare Status</span>
            <small id="txt-cf" style="color:var(--ag-gray)">OFFLINE</small>
        </div>
        <button onclick="runCheck()" style="width:100%; padding:12px; border-radius:10px; border:none; background:#222; color:white; font-weight:bold; cursor:pointer; margin-top:10px;">L√ÄM M·ªöI TR·∫†NG TH√ÅI</button>
    </div>

    <script>
        let isPowerOn = false;
        const AG_ID = "cc1a659b-a5b6-4fb1-b829-4ee1969f1c99";

        function toggleSystem() {
            const loader = document.getElementById('loader');
            const circle = document.getElementById('circle');
            const icon = document.getElementById('icon');
            const status = document.getElementById('status');

            if (!isPowerOn) {
                loader.style.display = "block";
                status.innerText = "ƒêANG T·ªêI ∆ØU H√ìA...";
                setTimeout(() => {
                    loader.style.display = "none";
                    circle.classList.add('active-circle');
                    icon.classList.add('active-icon');
                    status.innerText = "B·∫¢O V·ªÜ ƒê√É K√çCH HO·∫†T";
                    status.classList.add('status-on');
                    isPowerOn = true;
                    runCheck();
                }, 1000);
            } else {
                circle.classList.remove('active-circle');
                icon.classList.remove('active-icon');
                status.innerText = "CH·∫æ ƒê·ªò CH·ªú";
                status.classList.remove('status-on');
                isPowerOn = false;
                resetStatus();
            }
        }

        async function runCheck() {
            if(!isPowerOn) return;
            // Check AdGuard
            const img = new Image();
            img.onload = () => {
                document.getElementById('dot-ag').classList.add('dot-on');
                document.getElementById('txt-ag').innerText = "ACTIVE";
                document.getElementById('txt-ag').style.color = "var(--ag-green)";
            };
            img.src = `https://${AG_ID}.dns.nextdns.io/favicon.ico?` + Date.now();

            // Check Cloudflare
            try {
                await fetch('https://1.1.1.1/cdn-cgi/trace', { mode: 'no-cors' });
                document.getElementById('dot-cf').classList.add('dot-on');
                document.getElementById('txt-cf').innerText = "ONLINE";
                document.getElementById('txt-cf').style.color = "var(--ag-green)";
            } catch(e) {}
        }

        function resetStatus() {
            document.querySelectorAll('.dot').forEach(d => d.classList.remove('dot-on'));
            document.getElementById('txt-ag').innerText = "OFFLINE";
            document.getElementById('txt-cf').innerText = "OFFLINE";
            document.getElementById('txt-ag').style.color = "var(--ag-gray)";
            document.getElementById('txt-cf').style.color = "var(--ag-gray)";
        }

        function downloadWindows(type) {
            let name = (type === 'AdGuard') ? "adguard-remove-ads.bat" : "cloudflare-fast.bat";
            let dns1 = (type === 'AdGuard') ? "45.90.28.66" : "1.1.1.1";
            let dns2 = (type === 'AdGuard') ? "45.90.30.66" : "1.0.0.1";
            const bat = `@echo off\ntitle ${type} Setup\nfor /f "tokens=3*" %%i in ('netsh interface show interface ^| findstr /C:"Connected"') do (\nnetsh interface ip set dnsservers name="%%j" source=static address=${dns1} validate=no\nnetsh interface ip add dnsservers name="%%j" address=${dns2} index=2 validate=no\n)\nipconfig /flushdns\necho [OK] Da kich hoat ${type}!\npause`;
            const blob = new Blob([bat], {type: 'text/plain'});
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = name; a.click();
        }

        function installProfile(type) {
            let url = (type === 'AdGuard') ? `https://dns.nextdns.io/${AG_ID}` : "https://cloudflare-dns.com/dns-query";
            const profile = `<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"><plist version="1.0"><dict><key>PayloadContent</key><array><dict><key>DNSSettings</key><dict><key>DNSProtocol</key><string>HTTPS</string><key>ServerURL</key><string>${url}</string></dict><key>PayloadType</key><string>com.apple.dnsSettings.managed</string><key>PayloadIdentifier</key><string>com.dns.${type}</string><key>PayloadUUID</key><string>${Math.random()}</string><key>PayloadVersion</key><integer>1</integer></dict></array><key>PayloadDisplayName</key><string>${type} Pro</string><key>PayloadIdentifier</key><string>com.setup.${type}</string><key>PayloadType</key><string>Configuration</string><key>PayloadUUID</key><string>${Math.random()}</string><key>PayloadVersion</key><integer>1</integer></dict></plist>`;
            
            const blob = new Blob([profile], {type: 'application/x-apple-aspen-config'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${type}_Config.mobileconfig`;
            link.click();

            alert("H∆Ø·ªöNG D·∫™N C√ÄI ƒê·∫∂T IOS:\n1. Nh·∫•n 'Cho ph√©p' khi ƒë∆∞·ª£c h·ªèi t·∫£i v·ªÅ.\n2. V√†o 'C√†i ƒë·∫∑t' -> 'ƒê√£ t·∫£i v·ªÅ h·ªì s∆°'.\n3. Nh·∫•n 'C√†i ƒë·∫∑t' ·ªü g√≥c tr√™n b√™n ph·∫£i.\n4. V√†o 'C√†i ƒë·∫∑t chung' -> 'VPN & Thi·∫øt b·ªã' -> 'DNS' v√† ch·ªçn Profile v·ª´a c√†i.");
        }

        function copyAndroid(id) {
            navigator.clipboard.writeText(id);
            alert("ƒê√£ copy m√£ DNS: " + id + "\nNh·∫•n OK ƒë·ªÉ m·ªü c√†i ƒë·∫∑t Android.");
            window.location.href = "intent:#Intent;action=android.settings.PVT_DNS_SETTINGS;end";
        }
    </script>
</body>
</html>